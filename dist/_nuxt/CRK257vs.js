import{_ as b}from"./Bn6BtAIS.js";import{_ as B}from"./CICFfkz8.js";import{d as I,r as $,a as h,b as u,E as s,V as v,u as m,I as E,F as y,Q as N,R,G as V,S as q,Y as F,_ as S,a5 as L,O as T,j,P as z,a8 as A,h as D,$ as M,a0 as G,U as O}from"./D3LR0n4S.js";import{_ as P}from"./Bz5fjZyT.js";const Q=""+new URL("edit.BfCAEkBn.png",import.meta.url).href,Y={class:"expense-header"},H={key:0,class:"expense-name"},J={key:1,class:"expense-name"},K=I({__name:"ShoppingItem",props:{item:{},onclick:{type:Function}},emits:["update:isChecked","update:name"],setup(f,{emit:_}){const c=$(!1),d=f,g=_,l=()=>{g("update:isChecked",!d.item.isChecked)},C=()=>{c.value=!1,g("update:name",d.item.name)};return(p,o)=>{const k=P;return u(),h("div",{class:"expense",onClick:o[2]||(o[2]=r=>d.onclick&&d.onclick())},[s("div",Y,[m(c)?v("",!0):(u(),h("span",H,[E(y(p.item.name)+" ",1),s("span",null,[s("img",{src:Q,width:"20",height:"20",onClick:o[0]||(o[0]=r=>c.value=!m(c)),class:"edit"})])])),m(c)?(u(),h("span",J,[N(s("input",{"onUpdate:modelValue":o[1]||(o[1]=r=>p.item.name=r),maxlength:"42",required:""},null,512),[[R,p.item.name]]),s("button",{onClick:C},[V(k,{source:"confirm"})])])):v("",!0),s("div",{class:F(["check-zone",{checked:p.item.isChecked}]),onClick:q(l,["stop"])},null,2)])])}}}),W=S(K,[["__scopeId","data-v-ba92b2ee"]]),X={class:"background"},Z={class:"header"},ee={class:"square"},te=["onClick"],se=I({__name:"item_list",setup(f){const _=L(),d=T().user,{$bridge:g}=j(),l=g;l.setjwt(z("token").value??"");const{t:C}=A(),p=D(),o=$({});d.colocationId;const k=_.query.name,r=_.query.id;l.getShoppingListById(r).then(t=>{o.value=t}).catch(t=>{console.error("Error fetching shopping list items:",t)});const w=()=>{p.push({path:"/shopping/additem_list",query:{name:k,listId:r}})},x=(t,i)=>{var a;const e=(a=o.value.shoppingItems)==null?void 0:a.find(n=>n.id===t);e&&(e.isChecked=i,e.shoppinglistId=r,console.log(e),l.updateShoppingListItem(e).then(n=>{if(!n){console.error(`Failed to update item ${t}`),e.isChecked=!i;return}console.log(`Item ${t} updated successfully`)}).catch(n=>{console.error(`Error updating item ${t}:`,n)}))},U=(t,i)=>{var a;const e=(a=o.value.shoppingItems)==null?void 0:a.find(n=>n.id===t);e&&(e.name=i,e.shoppinglistId=r,console.log(e),l.updateShoppingListItem(e).then(n=>{if(!n){console.error(`Failed to update item ${t}`),window.location.reload();return}console.log(`Item ${t} updated successfully`)}).catch(n=>{console.error(`Error updating item ${t}:`,n)}))};return(t,i)=>(u(),h("div",X,[s("div",Z,[s("img",{src:b,alt:"Return",width:"30",height:"30",onClick:i[0]||(i[0]=e=>t.$router.back())}),s("h1",null,y(m(k)),1),s("div",ee,[s("div",{id:"add",onClick:()=>w()},i[1]||(i[1]=[s("img",{src:B,alt:"Return",width:"30",height:"30"},null,-1)]),8,te)])]),s("div",null,[(u(!0),h(M,null,G(m(o).shoppingItems,e=>(u(),O(m(W),{key:e.id??e.name,item:e,"onUpdate:isChecked":a=>x(e.id??"",a),"onUpdate:name":a=>U(e.id??"",a)},null,8,["item","onUpdate:isChecked","onUpdate:name"]))),128))])]))}}),re=S(se,[["__scopeId","data-v-ec8d0296"]]);export{re as default};
