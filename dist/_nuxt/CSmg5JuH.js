import{_ as G}from"./Bz5fjZyT.js";import{d as H,r as w,f as J,a as m,ab as ae,O as R,j,P as q,T as K,g as U,s as le,U as Z,b as i,H as N,V as F,u as r,E as e,S as O,G as h,I as B,Q as I,R as W,$ as Q,a0 as X,F as C,a6 as de,X as P,_ as V,Y as ee,aa as z,Z as te}from"./D3LR0n4S.js";import{u as oe,_ as re,a as ie}from"./Dz89YSo-.js";const ce=Symbol.for("nuxt:client-only"),ue=H({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(v,{slots:l,attrs:b}){const t=w(!1);return J(()=>{t.value=!0}),ae(ce,!0),d=>{var n;if(t.value)return(n=l.default)==null?void 0:n.call(l);const y=l.fallback||l.placeholder;if(y)return y();const c=d.fallback||d.placeholder||"",_=d.fallbackTag||d.placeholderTag||"span";return m(_,b,c)}}}),pe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEfSURBVHgBtVQBEYMwDAxTMAdDAhKYEyTgABwxB5XAHBQHSOgSlh5ZgSbctr/LtbTf55NcC3CAEMIVo8UYMHxYQXOH0WCUYAULdhhzsKGziJaJO5c6w3nFa0OSRWkRpbE+aWRfXBBGKgcYwaUbhfhVbna7G+fEo7FephNRZg77XC2pdKwxL+a4EYQH5F3la/nmOOa08qNRhNVGfZgU5AoUaOJhLasHngQ4Tj0Hv3NuwQX+BeHsZuBqpajiHjl+8vpdE8XBYdA4Eb8oiimhxT5NdKDlvziwZbZxKjjx/WjirYkvWa0I50S3Fw0nvXDzmyu9s/HVIwQHqah1TM7UpjNh+9BTM+iaVgmH1pzgmYzImmuYmWvvS+LMJ+4okzYn+AJWiCLJUgwSAAAAAABJRU5ErkJggg==",me={key:0},_e={class:"modal-header left"},ve={class:"modal-header-text"},ge={method:"post",action:""},fe={class:"modal-body left"},Ae={class:"task-assignee"},he={class:"text-task-assignee"},be=["value"],ye={class:"modal-buttons"},ke=H({__name:"AddTaskModal",props:{name:{},modelValue:{type:Boolean},header:{type:Boolean,default:!0},buttons:{type:Boolean,default:!0},borders:{type:Boolean,default:!0}},emits:["closed","proceed","update:modelValue"],setup(v,{expose:l,emit:b}){const t=v,d=R(),{$bridge:y}=j(),c=y;c.setjwt(q("token").value??"");const _=w([]),n=w({colocationId:d.user.colocationId,createdBy:d.user.id,dueDate:"",title:"",description:"",enrolled:null,isDone:!1}),{modelValue:u}=K(t),{open:D,close:g,toggle:o,visible:k}=oe(t.name);c.getUserbyCollocId(d.user.colocationId).then(f=>{_.value=f}).catch(f=>{console.error("Error fetching data:",f)});const x=b;l({open:D,close:g,toggle:o,visible:k});const S=()=>{g(),x("closed")},T=async()=>{const f={...n.value,enrolled:n.value.enrolled?[n.value.enrolled]:[]};await c.addChore(f),g(),x("proceed")};return U(u,(f,a)=>{f!==a&&o(f)},{immediate:!0}),U(k,f=>{x("update:modelValue",f)}),(f,a)=>{const $=G,E=le("vue-date-picker"),Y=ue;return i(),Z(P,{name:"modal"},{default:N(()=>[r(k)?(i(),m("div",me,[e("div",{class:"modal-background",onClick:S},[e("div",{class:"modal",onClick:a[4]||(a[4]=O(()=>{},["stop"]))},[e("div",_e,[e("h1",ve,[h($,{source:"newTask"}),a[5]||(a[5]=B(": "))])]),e("form",ge,[e("div",fe,[I(e("input",{class:"modal-body-input","onUpdate:modelValue":a[0]||(a[0]=A=>r(n).title=A),placeholder:"Set task name",required:""},null,512),[[W,r(n).title]]),I(e("input",{class:"modal-body-input","onUpdate:modelValue":a[1]||(a[1]=A=>r(n).description=A),placeholder:"Set task description (optional)"},null,512),[[W,r(n).description]])]),e("div",Ae,[e("text",he,[h($,{source:"Assignee"}),a[6]||(a[6]=B(": "))]),I(e("select",{"onUpdate:modelValue":a[2]||(a[2]=A=>r(n).enrolled=A),class:"input-task-assignee"},[(i(!0),m(Q,null,X(r(_),A=>(i(),m("option",{key:A.id,value:A.id},C(A.username),9,be))),128))],512),[[de,r(n).enrolled]])]),h(Y,null,{default:N(()=>[h(E,{placeholder:"MM/DD/YYYY",format:"MM/dd/yyyy",modelValue:r(n).dueDate,"onUpdate:modelValue":a[3]||(a[3]=A=>r(n).dueDate=A)},null,8,["modelValue"])]),_:1}),e("div",ye,[e("button",{class:"button-proceed",onClick:O(T,["prevent"])},a[7]||(a[7]=[e("img",{src:pe,class:"submit"},null,-1)]))])])])])])):F("",!0)]),_:1})}}}),De=V(ke,[["__scopeId","data-v-a97e3ba9"]]),xe={},Ce={class:"box"};function we(v,l){return i(),m("div",Ce,l[0]||(l[0]=[e("text",null,"COMMING SOON",-1)]))}const Se=V(xe,[["render",we],["__scopeId","data-v-32eade10"]]),Be={key:0},Ve={class:"modal-header"},$e={class:"modal-header-text"},Me={class:"title"},Ue={class:"description"},Te={class:"due-date"},Ee={class:"number"},Ye={class:"month"},Ie={class:"modal-body"},Ne={class:"modal-buttons"},Oe={class:"enrollees-icon-container"},He=["value"],Re={key:0},je={key:1},qe={key:2},Qe={key:3},Xe=H({__name:"TaskModal",props:{id:{},title:{},modelValue:{type:Boolean},description:{},color:{},dueDate:{},isDone:{type:Boolean}},emits:["closed","proceed","update:modelValue"],setup(v,{expose:l,emit:b}){const t=v,d=R(),{$bridge:y}=j(),c=y;c.setjwt(q("token").value??"");const _=w(!1),n=w([]);var u=t.isDone;const{modelValue:D}=K(t),{open:g,close:o,toggle:k,visible:x}=oe(t.title),S=b;l({open:g,close:o,toggle:k,visible:x});const T=async()=>{const s=await c.getUserEnrollChore(t.id);n.value=s,_.value=s.some(p=>p.id===d.user.id)},f=()=>{o(),S("closed")},a=async()=>{c.deleteChoreUser(t.id,d.user.id).then(()=>{_.value=!1}).catch(s=>{console.error("Error delete chore user:",s)}),o(),S("proceed")},$=async()=>{c.addChoreUser(t.id,d.user.id).then(()=>{_.value=!0}).catch(s=>{console.error("Error add chore user:",s)}),o(),S("proceed")},E=async()=>{const s={id:t.id,colocationId:d.user.colocationId,dueDate:t.dueDate,title:t.title,description:t.description,isDone:!0,enrolled:n.value.map(p=>p.id)};c.updateChore(s).then(()=>{u=!0}).catch(p=>{console.error("Error update chore:",p)}),o(),S("proceed")};function Y(){return new Date(t.dueDate).getDate()}function A(){return new Date(t.dueDate).toLocaleString("en-US",{month:"short"})}return U(D,(s,p)=>{s!==p&&(k(s),s===!0&&T())},{immediate:!0}),U(x,s=>{S("update:modelValue",s)}),(s,p)=>{const ne=Se,se=re,M=G;return i(),Z(P,{name:"modal"},{default:N(()=>[r(x)?(i(),m("div",Be,[e("div",{class:"modal-background",onClick:f},[e("div",{class:ee(["modal",t.color]),onClick:p[0]||(p[0]=O(()=>{},["stop"]))},[e("div",Ve,[e("div",$e,[e("text",Me,C(s.title),1),e("text",Ue,C(s.description),1)]),e("div",Te,[e("div",Ee,C(Y()),1),e("div",Ye,C(A()),1)])]),e("div",Ie,[h(ne),z(s.$slots,"content",{},void 0,!0)]),e("div",Ne,[e("div",Oe,[(i(!0),m(Q,null,X(r(n),L=>(i(),m("div",{key:L.id,value:L.id,class:"enrollees-icon"},[h(se,{height:33,width:33})],8,He))),128))]),z(s.$slots,"buttons",{},()=>[r(_)?(i(),m("div",Re,[e("button",{class:"button button-proceed",onClick:a},[h(M,{source:"quit"}),p[1]||(p[1]=B(" :c "))])])):(i(),m("div",je,[e("button",{class:"button button-proceed",onClick:$},[h(M,{source:"Enroll"}),p[2]||(p[2]=B(" ! "))])])),r(u)?(i(),m("div",qe,[e("text",null,[h(M,{source:"isDone"})])])):(i(),m("div",Qe,[e("button",{class:"button button-proceed",onClick:E},[h(M,{source:"Done"}),p[3]||(p[3]=B(" ! "))])]))],!0)])],2)])])):F("",!0)]),_:3})}}}),Le=V(Xe,[["__scopeId","data-v-94826e66"]]),We={class:"task-container"},ze={class:"due-date"},Ge={class:"number"},Je={class:"month"},Ke={__name:"Task",props:{id:{type:String,required:!0},title:{type:String,required:!1},description:{type:String,required:!1},createdBy:{type:String,required:!0},createdAt:{type:String,required:!0},dueDate:{type:String,required:!0},isDone:{type:Boolean,required:!0}},emits:["proceed","get"],setup(v,{emit:l}){const b=v,t=w(!1),d=()=>t.value=!0,y=l;function c(){y("proceed")}function _(){return new Date(b.dueDate).getDate()}function n(){return new Date(b.dueDate).toLocaleString("en-US",{month:"short"})}function u(){const D=new Date(b.dueDate),o=Math.ceil((D-new Date)/(1e3*3600*24));return o<1?"red":o<3?"orange":o>3?"green":"red"}return(D,g)=>{const o=Le;return i(),m("div",We,[h(o,{modelValue:r(t),"onUpdate:modelValue":g[0]||(g[0]=k=>te(t)?t.value=k:null),id:v.id,title:v.title,description:v.description,color:u(),dueDate:v.dueDate,isDone:v.isDone,onProceed:g[1]||(g[1]=k=>c())},null,8,["modelValue","id","title","description","color","dueDate","isDone"]),e("div",{class:ee(["task",[u()]]),"data-toggle":"modal","data-target":".bd-example-modal-sm",onClick:d},[e("h1",null,C(v.title),1),e("div",ze,[e("div",Ge,C(_()),1),e("div",Je,C(n()),1)])],2)])}}},Ze=V(Ke,[["__scopeId","data-v-70137f6a"]]),Fe={__name:"tasks",setup(v){const l=w(!1),b=()=>l.value=!0,t=R(),{$bridge:d}=j(),y=d;y.setjwt(q("token").value??"");const c=w([]),_=async()=>{const n=await y.getAllChore(t.user.colocationId);c.value=n};return J(async()=>{await _()}),(n,u)=>{const D=De,g=Ze;return i(),m("div",null,[h(D,{modelValue:r(l),"onUpdate:modelValue":u[0]||(u[0]=o=>te(l)?l.value=o:null),onProceed:u[1]||(u[1]=o=>_())},null,8,["modelValue"]),e("button",{class:"add-post","data-toggle":"modal","data-target":".bd-example-modal-sm",onClick:b},u[3]||(u[3]=[e("img",{src:ie,class:"plus"},null,-1)])),(i(!0),m(Q,null,X(r(c),(o,k)=>(i(),m("div",{key:k,class:"task-list"},[h(g,{id:o.id,title:o.title,description:o.description,createdBy:o.createdBy,createdAt:o.createdAt,dueDate:o.dueDate,isDone:o.isDone,onProceed:u[2]||(u[2]=x=>_())},null,8,["id","title","description","createdBy","createdAt","dueDate","isDone"])]))),128))])}}},ot=V(Fe,[["__scopeId","data-v-deb00020"]]);export{ot as default};
