import{_ as L}from"./56CdA-sP.js";import{_ as N}from"./B7k9Z92u.js";import{d as x,r as y,a as _,b as p,V as E,E as o,P as S,Q as v,u as d,I as D,F as U,L as F,M as R,G as V,N as q,U as M,_ as B,a3 as A,J,j as T,K as j,S as z,h as G,X as P}from"./-TKAxbLO.js";import{u as H}from"./DHgWwkuS.js";import{_ as K}from"./C6SAlZk3.js";import{_ as Q}from"./MpVfu-CH.js";const X=""+new URL("edit.BfCAEkBn.png",import.meta.url).href,O=""+new URL("delete.B1EGMJrJ.png",import.meta.url).href,W={class:"expense-header"},Y={key:0,class:"expense-name"},Z={key:1,class:"expense-name"},ee=x({__name:"ShoppingItem",props:{item:{},onclick:{type:Function}},emits:["update:isChecked","update:name","delete"],setup(b,{emit:f}){const g=y(!1),l=y(!1),m=b,a=f,w=()=>{g.value=!0},C=async()=>{g.value=!1,a("delete")},c=()=>{g.value=!1},k=()=>{a("update:isChecked",!m.item.isChecked)},h=()=>{l.value=!1,a("update:name",m.item.name)};return(u,r)=>{const I=K,$=Q;return p(),_(E,null,[o("div",{class:"expense",onClick:r[2]||(r[2]=e=>m.onclick&&m.onclick())},[o("div",W,[d(l)?v("",!0):(p(),_("span",Y,[D(U(u.item.name)+" ",1),o("span",null,[o("img",{src:X,width:"20",height:"20",onClick:r[0]||(r[0]=e=>l.value=!d(l)),class:"edit"})])])),d(l)?(p(),_("span",Z,[F(o("input",{class:"modify-input","onUpdate:modelValue":r[1]||(r[1]=e=>u.item.name=e),maxlength:"42",required:""},null,512),[[R,u.item.name]]),o("button",{class:"ok-button",onClick:h},[V(I,{source:"confirm"})]),o("button",{class:"delete-button",onClick:w},r[3]||(r[3]=[o("img",{src:O,width:"20",height:"20"},null,-1)]))])):v("",!0),d(l)?v("",!0):(p(),_("div",{key:2,class:M(["check-zone",{checked:u.item.isChecked}]),onClick:q(k,["stop"])},null,2))])]),d(g)?(p(),S($,{key:0,text:u.$t("confirm_delete_shoppingitem"),onConfirm:C,onClose:c},null,8,["text"])):v("",!0)],64)}}}),te=B(ee,[["__scopeId","data-v-bbe8d199"]]),oe={class:"background"},se={class:"header"},ne={class:"header-name"},ie=["onClick"],re=x({__name:"item_list",setup(b){H({bodyAttrs:{style:"background-color: #1E1E1E;"}});const f=A(),l=J().user,{$bridge:m}=T(),a=m;a.setjwt(j("token").value??"");const{t:w}=z(),C=G(),c=y({});l.colocationId;const k=f.query.name,h=f.query.id;a.getShoppingListById(h).then(e=>{c.value=e}).catch(e=>{console.error("Error fetching shopping list items:",e)});const u=()=>{C.push({path:"/shopping/additem_list",query:{name:k,listId:h}})},r=(e,s)=>{var n;const t=(n=c.value.shoppingItems)==null?void 0:n.find(i=>i.id===e);t&&(t.isChecked=s,t.shoppinglistId=h,console.log(t),a.updateShoppingListItem(t).then(i=>{if(!i){console.error(`Failed to update item ${e}`),t.isChecked=!s;return}console.log(`Item ${e} updated successfully`)}).catch(i=>{console.error(`Error updating item ${e}:`,i)}))},I=(e,s)=>{var n;const t=(n=c.value.shoppingItems)==null?void 0:n.find(i=>i.id===e);t&&(t.name=s,t.shoppinglistId=h,console.log(t),a.updateShoppingListItem(t).then(i=>{if(!i){console.error(`Failed to update item ${e}`),window.location.reload();return}console.log(`Item ${e} updated successfully`)}).catch(i=>{console.error(`Error updating item ${e}:`,i)}))},$=e=>{a.deleteShoppingListItem(e).then(s=>{var t;if(!s){console.error(`Failed to delete item ${e}`);return}console.log(`Item ${e} deleted successfully`),c.value.shoppingItems=(t=c.value.shoppingItems)==null?void 0:t.filter(n=>n.id!==e)}).catch(s=>{console.error(`Error deleting item ${e}:`,s)})};return(e,s)=>(p(),_("div",oe,[o("div",se,[o("img",{src:L,alt:"Return",width:"30",height:"30",onClick:s[0]||(s[0]=t=>e.$router.back())}),o("div",ne,U(d(k)),1),o("div",{class:"square",onClick:()=>u()},s[1]||(s[1]=[o("img",{src:N,alt:"Return",width:"20",height:"20"},null,-1)]),8,ie)]),o("div",null,[(p(!0),_(E,null,P(d(c).shoppingItems,t=>(p(),S(d(te),{key:t.id??t.name,item:t,"onUpdate:isChecked":n=>r(t.id??"",n),"onUpdate:name":n=>I(t.id??"",n),onDelete:n=>$(t.id??"")},null,8,["item","onUpdate:isChecked","onUpdate:name","onDelete"]))),128))])]))}}),me=B(re,[["__scopeId","data-v-17357fdb"]]);export{me as default};
