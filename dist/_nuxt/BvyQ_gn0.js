import{O as i,P as d,j as f,f as g,K as p,Q as w,L as _,a as m,b as j}from"./C_YoKuVe.js";import{u as h}from"./BaTYqQDK.js";const b={__name:"google-callback",setup(k){const{authenticateUser:r}=i(),{authenticated:n}=d(i()),u=h(),{$bridge:t}=f(),c=_(),l=p();return g(async()=>{const s=l.query.code;console.log(s);const a=w("register_token");if(s)if(a.value){const e={username:a.value},o=await t.addUser(e,s);console.log("user registerd"),o&&(t.setjwt(o.jwt),u.setUser(o.user),await r(o.jwt)),n&&c.push("/")}else{const e=await t.login(s);console.log("user logged in"),e&&(t.setjwt(e.jwt),u.setUser(e.user),await r(e.jwt)),n&&c.push("/")}}),(s,a)=>(j(),m("div",null,"Connexion en cours..."))}};export{b as default};
