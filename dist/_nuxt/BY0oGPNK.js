import{_ as b}from"./x-zbH_Sz.js";import{_ as B}from"./DO0GZD6H.js";import{d as I,r as $,a as h,b as d,E as s,Q as f,u as l,I as N,F as y,L as U,M as L,G as V,N as q,S as F,_ as S,a2 as R,J as A,j as M,K as T,a5 as j,h as z,V as D,W as G,P as H}from"./BNFBiJdQ.js";import{u as J}from"./D8Xuj-Qz.js";import{_ as K}from"./BzQnW90U.js";const P=""+new URL("edit.BfCAEkBn.png",import.meta.url).href,Q={class:"expense-header"},W={key:0,class:"expense-name"},O={key:1,class:"expense-name"},X=I({__name:"ShoppingItem",props:{item:{},onclick:{type:Function}},emits:["update:isChecked","update:name"],setup(C,{emit:_}){const c=$(!1),p=C,g=_,u=()=>{g("update:isChecked",!p.item.isChecked)},v=()=>{c.value=!1,g("update:name",p.item.name)};return(m,o)=>{const k=K;return d(),h("div",{class:"expense",onClick:o[2]||(o[2]=r=>p.onclick&&p.onclick())},[s("div",Q,[l(c)?f("",!0):(d(),h("span",W,[N(y(m.item.name)+" ",1),s("span",null,[s("img",{src:P,width:"20",height:"20",onClick:o[0]||(o[0]=r=>c.value=!l(c)),class:"edit"})])])),l(c)?(d(),h("span",O,[U(s("input",{class:"modify-input","onUpdate:modelValue":o[1]||(o[1]=r=>m.item.name=r),maxlength:"42",required:""},null,512),[[L,m.item.name]]),s("button",{class:"ok-button",onClick:v},[V(k,{source:"confirm"})])])):f("",!0),l(c)?f("",!0):(d(),h("div",{key:2,class:F(["check-zone",{checked:m.item.isChecked}]),onClick:q(u,["stop"])},null,2))])])}}}),Y=S(X,[["__scopeId","data-v-eae9269f"]]),Z={class:"background"},ee={class:"header"},te={class:"header-name"},se={class:"square"},oe=["onClick"],ne=I({__name:"item_list",setup(C){J({bodyAttrs:{style:"background-color: #1E1E1E;"}});const _=R(),p=A().user,{$bridge:g}=M(),u=g;u.setjwt(T("token").value??"");const{t:v}=j(),m=z(),o=$({});p.colocationId;const k=_.query.name,r=_.query.id;u.getShoppingListById(r).then(t=>{o.value=t}).catch(t=>{console.error("Error fetching shopping list items:",t)});const w=()=>{m.push({path:"/shopping/additem_list",query:{name:k,listId:r}})},x=(t,i)=>{var a;const e=(a=o.value.shoppingItems)==null?void 0:a.find(n=>n.id===t);e&&(e.isChecked=i,e.shoppinglistId=r,console.log(e),u.updateShoppingListItem(e).then(n=>{if(!n){console.error(`Failed to update item ${t}`),e.isChecked=!i;return}console.log(`Item ${t} updated successfully`)}).catch(n=>{console.error(`Error updating item ${t}:`,n)}))},E=(t,i)=>{var a;const e=(a=o.value.shoppingItems)==null?void 0:a.find(n=>n.id===t);e&&(e.name=i,e.shoppinglistId=r,console.log(e),u.updateShoppingListItem(e).then(n=>{if(!n){console.error(`Failed to update item ${t}`),window.location.reload();return}console.log(`Item ${t} updated successfully`)}).catch(n=>{console.error(`Error updating item ${t}:`,n)}))};return(t,i)=>(d(),h("div",Z,[s("div",ee,[s("img",{src:b,alt:"Return",width:"30",height:"30",onClick:i[0]||(i[0]=e=>t.$router.back())}),s("h1",te,y(l(k)),1),s("div",se,[s("div",{id:"add",onClick:()=>w()},i[1]||(i[1]=[s("img",{src:B,alt:"Return",width:"30",height:"30"},null,-1)]),8,oe)])]),s("div",null,[(d(!0),h(D,null,G(l(o).shoppingItems,e=>(d(),H(l(Y),{key:e.id??e.name,item:e,"onUpdate:isChecked":a=>x(e.id??"",a),"onUpdate:name":a=>E(e.id??"",a)},null,8,["item","onUpdate:isChecked","onUpdate:name"]))),128))])]))}}),le=S(ne,[["__scopeId","data-v-39f98cd8"]]);export{le as default};
