import{_ as K}from"./CPblPPHw.js";import{d as H,r as $,f as F,a as c,ab as le,J as j,j as q,K as Q,O as P,g as T,s as de,P as R,b as l,H as O,Q as Z,u as r,E as e,N as U,G as h,I as w,L as N,M as J,V as L,X,F as C,a4 as ie,T as ee,_ as B,U as te,a7 as z,W as oe}from"./BX9cP-eP.js";import{u as ne,_ as re,a as ce}from"./BcZF_Rjv.js";const ue=Symbol.for("nuxt:client-only"),pe=H({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(_,{slots:d,attrs:A}){const n=$(!1);return F(()=>{n.value=!0}),le(ue,!0),i=>{var s;if(n.value)return(s=d.default)==null?void 0:s.call(d);const b=d.fallback||d.placeholder;if(b)return b();const u=i.fallback||i.placeholder||"",v=i.fallbackTag||i.placeholderTag||"span";return c(v,A,u)}}}),G="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEfSURBVHgBtVQBEYMwDAxTMAdDAhKYEyTgABwxB5XAHBQHSOgSlh5ZgSbctr/LtbTf55NcC3CAEMIVo8UYMHxYQXOH0WCUYAULdhhzsKGziJaJO5c6w3nFa0OSRWkRpbE+aWRfXBBGKgcYwaUbhfhVbna7G+fEo7FephNRZg77XC2pdKwxL+a4EYQH5F3la/nmOOa08qNRhNVGfZgU5AoUaOJhLasHngQ4Tj0Hv3NuwQX+BeHsZuBqpajiHjl+8vpdE8XBYdA4Eb8oiimhxT5NdKDlvziwZbZxKjjx/WjirYkvWa0I50S3Fw0nvXDzmyu9s/HVIwQHqah1TM7UpjNh+9BTM+iaVgmH1pzgmYzImmuYmWvvS+LMJ+4okzYn+AJWiCLJUgwSAAAAAABJRU5ErkJggg==",me={key:0},_e={class:"modal-header"},ve={class:"modal-header-text"},ge={method:"post",action:""},fe={class:"modal-body"},he=["placeholder"],Ae=["placeholder"],be={class:"task-assignee"},ke={class:"text-task-assignee"},ye=["value"],De={class:"date-picker"},xe={key:0,class:"modal-buttons"},Ce={key:1,class:"modal-buttons"},$e=H({__name:"AddTaskModal",props:{name:{},modelValue:{type:Boolean},header:{type:Boolean,default:!0},buttons:{type:Boolean,default:!0},borders:{type:Boolean,default:!0}},emits:["closed","proceed","update:modelValue"],setup(_,{expose:d,emit:A}){const n=_,i=j(),{$bridge:b}=q(),u=b;u.setjwt(Q("token").value??"");const v=$([]),s=$({colocationId:i.user.colocationId,createdBy:i.user.id,dueDate:"",title:"",description:"",enrolled:null,isDone:!1}),{modelValue:p}=P(n),{open:y,close:f,toggle:a,visible:k}=ne(n.name);u.getUserbyCollocId(i.user.colocationId).then(g=>{v.value=g}).catch(g=>{console.error("Error fetching data:",g)});const D=A;d({open:y,close:f,toggle:a,visible:k});const x=()=>{s.value={colocationId:i.user.colocationId,createdBy:i.user.id,dueDate:"",title:"",description:"",enrolled:null,isDone:!1}},E=()=>{x(),f(),D("closed")},V=async()=>{const g={...s.value,enrolled:s.value.enrolled?[s.value.enrolled]:[]};await u.addChore(g)&&(x(),f(),D("proceed"))};return T(p,(g,o)=>{g!==o&&a(g)},{immediate:!0}),T(k,g=>{D("update:modelValue",g)}),(g,o)=>{const M=K,I=de("vue-date-picker"),Y=pe;return l(),R(ee,{name:"modal"},{default:O(()=>[r(k)?(l(),c("div",me,[e("div",{class:"modal-background",onClick:E},[e("div",{class:"modal",onClick:o[4]||(o[4]=U(()=>{},["stop"]))},[o[10]||(o[10]=e("div",{class:"padding-top"},null,-1)),e("div",_e,[e("h1",ve,[h(M,{source:"newTask"}),o[5]||(o[5]=w(": "))])]),e("form",ge,[e("div",fe,[N(e("input",{class:"modal-body-input","onUpdate:modelValue":o[0]||(o[0]=t=>r(s).title=t),maxlength:"35",placeholder:g.$t("task_name"),required:""},null,8,he),[[J,r(s).title]]),N(e("input",{class:"modal-body-input","onUpdate:modelValue":o[1]||(o[1]=t=>r(s).description=t),maxlength:"45",placeholder:g.$t("task_description")},null,8,Ae),[[J,r(s).description]])]),e("div",be,[e("text",ke,[h(M,{source:"Assignee"}),o[6]||(o[6]=w(": "))]),N(e("select",{"onUpdate:modelValue":o[2]||(o[2]=t=>r(s).enrolled=t),class:"input-task-assignee"},[o[7]||(o[7]=e("option",null,null,-1)),(l(!0),c(L,null,X(r(v),t=>(l(),c("option",{key:t.id,value:t.id},C(t.username),9,ye))),128))],512),[[ie,r(s).enrolled]])]),e("div",De,[h(Y,null,{default:O(()=>[h(I,{placeholder:"MM/DD/YYYY",format:"MM/dd/yyyy",modelValue:r(s).dueDate,"onUpdate:modelValue":o[3]||(o[3]=t=>r(s).dueDate=t),"teleport-center":"",dark:""},null,8,["modelValue"])]),_:1})]),r(s).dueDate&&r(s).title?(l(),c("div",xe,[e("button",{class:"button-proceed",onClick:U(V,["prevent"])},o[8]||(o[8]=[e("img",{src:G,class:"submit"},null,-1)]))])):(l(),c("div",Ce,[e("button",{class:"button-proceed",onClick:U(V,["prevent"]),disabled:""},o[9]||(o[9]=[e("img",{src:G,class:"submit"},null,-1)]))]))])])])])):Z("",!0)]),_:1})}}}),we=B($e,[["__scopeId","data-v-444f1729"]]),Be={},Ve={class:"box"};function Me(_,d){return l(),c("div",Ve,d[0]||(d[0]=[e("text",null,"COMMING SOON",-1)]))}const Se=B(Be,[["render",Me],["__scopeId","data-v-ec2aed27"]]),Ue={key:0},Te={class:"modal-header"},Ee={class:"modal-header-text"},Ie={class:"title"},Ye={class:"description"},Ne={class:"due-date"},Oe={class:"number"},He={class:"month"},je={class:"modal-body"},qe={class:"modal-buttons"},Qe={class:"enrollees-icon-container"},Re=["value"],Le={key:0},Xe={key:1},We={key:2},Je={key:3},ze=H({__name:"TaskModal",props:{id:{},title:{},modelValue:{type:Boolean},description:{},color:{},dueDate:{},isDone:{type:Boolean}},emits:["closed","proceed","update:modelValue"],setup(_,{expose:d,emit:A}){const n=_,i=j(),{$bridge:b}=q(),u=b;u.setjwt(Q("token").value??"");const v=$(!1),s=$([]);var p=n.isDone;const{modelValue:y}=P(n),{open:f,close:a,toggle:k,visible:D}=ne(n.title),x=A;d({open:f,close:a,toggle:k,visible:D});const E=async()=>{const t=await u.getUserEnrollChore(n.id);s.value=t,v.value=t.some(m=>m.id===i.user.id)},V=()=>{a(),x("closed")},g=async()=>{u.deleteChoreUser(n.id,i.user.id).then(()=>{v.value=!1}).catch(t=>{console.error("Error delete chore user:",t)}),a(),x("proceed")},o=async()=>{u.addChoreUser(n.id,i.user.id).then(()=>{v.value=!0}).catch(t=>{console.error("Error add chore user:",t)}),a(),x("proceed")},M=async()=>{const t={id:n.id,colocationId:i.user.colocationId,dueDate:n.dueDate,title:n.title,description:n.description,isDone:!0,enrolled:s.value.map(m=>m.id)};u.updateChore(t).then(()=>{p=!0}).catch(m=>{console.error("Error update chore:",m)}),a(),x("proceed")};function I(){return new Date(n.dueDate).getDate()}function Y(){return new Date(n.dueDate).toLocaleString("en-US",{month:"short"})}return T(y,(t,m)=>{t!==m&&(k(t),t===!0&&E())},{immediate:!0}),T(D,t=>{x("update:modelValue",t)}),(t,m)=>{const se=Se,ae=re,S=K;return l(),R(ee,{name:"modal"},{default:O(()=>[r(D)?(l(),c("div",Ue,[e("div",{class:"modal-background",onClick:V},[e("div",{class:te(["modal",n.color]),onClick:m[0]||(m[0]=U(()=>{},["stop"]))},[e("div",Te,[e("div",Ee,[e("text",Ie,C(t.title),1),e("text",Ye,C(t.description),1)]),e("div",Ne,[e("div",Oe,C(I()),1),e("div",He,C(Y()),1)])]),e("div",je,[h(se),z(t.$slots,"content",{},void 0,!0)]),e("div",qe,[e("div",Qe,[(l(!0),c(L,null,X(r(s),W=>(l(),c("div",{key:W.id,value:W.id,class:"enrollees-icon"},[h(ae,{height:33,width:33})],8,Re))),128))]),z(t.$slots,"buttons",{},()=>[r(v)?(l(),c("div",Le,[e("button",{class:"button button-proceed",onClick:g},[h(S,{source:"quit"}),m[1]||(m[1]=w(" :c "))])])):(l(),c("div",Xe,[e("button",{class:"button button-proceed",onClick:o},[h(S,{source:"Enroll"}),m[2]||(m[2]=w(" ! "))])])),r(p)?(l(),c("div",We,[e("text",null,[h(S,{source:"isDone"})])])):(l(),c("div",Je,[e("button",{class:"button button-proceed",onClick:M},[h(S,{source:"Done"}),m[3]||(m[3]=w(" ! "))])]))],!0)])],2)])])):Z("",!0)]),_:3})}}}),Ge=B(ze,[["__scopeId","data-v-5a004eff"]]),Ke={class:"task-container"},Fe={class:"due-date"},Pe={class:"number"},Ze={class:"month"},et={__name:"Task",props:{id:{type:String,required:!0},title:{type:String,required:!1},description:{type:String,required:!1},createdBy:{type:String,required:!0},createdAt:{type:String,required:!0},dueDate:{type:String,required:!0},isDone:{type:Boolean,required:!0}},emits:["proceed","get"],setup(_,{emit:d}){const A=_,n=$(!1),i=()=>n.value=!0,b=d;function u(){b("proceed")}function v(){return new Date(A.dueDate).getDate()}function s(){return new Date(A.dueDate).toLocaleString("en-US",{month:"short"})}function p(){const y=new Date(A.dueDate),a=Math.ceil((y-new Date)/(1e3*3600*24));return a<1?"red":a<3?"orange":a>=3?"green":"red"}return(y,f)=>{const a=Ge;return l(),c("div",Ke,[(l(),R(a,{modelValue:r(n),"onUpdate:modelValue":f[0]||(f[0]=k=>oe(n)?n.value=k:null),key:_.id,id:_.id,title:_.title,description:_.description,color:p(),dueDate:_.dueDate,isDone:_.isDone,onProceed:f[1]||(f[1]=k=>u())},null,8,["modelValue","id","title","description","color","dueDate","isDone"])),e("div",{class:te(["task",[p()]]),"data-toggle":"modal","data-target":".bd-example-modal-sm",onClick:i},[e("h1",null,C(_.title),1),e("div",Fe,[e("div",Pe,C(v()),1),e("div",Ze,C(s()),1)])],2)])}}},tt=B(et,[["__scopeId","data-v-365b7cc5"]]),ot={__name:"tasks",setup(_){const d=$(!1),A=()=>d.value=!0,n=j(),{$bridge:i}=q(),b=i;b.setjwt(Q("token").value??"");const u=$([]),v=async()=>{const s=await b.getAllChore(n.user.colocationId);u.value=s};return F(async()=>{await v()}),(s,p)=>{const y=we,f=tt;return l(),c("div",null,[h(y,{modelValue:r(d),"onUpdate:modelValue":p[0]||(p[0]=a=>oe(d)?d.value=a:null),onProceed:p[1]||(p[1]=a=>v())},null,8,["modelValue"]),e("button",{class:"add-post","data-toggle":"modal","data-target":".bd-example-modal-sm",onClick:A},p[3]||(p[3]=[e("img",{src:ce,class:"plus"},null,-1)])),(l(!0),c(L,null,X(r(u),(a,k)=>(l(),c("div",{key:k,class:"task-list"},[h(f,{id:a.id,title:a.title,description:a.description,createdBy:a.createdBy,createdAt:a.createdAt,dueDate:a.dueDate,isDone:a.isDone,onProceed:p[2]||(p[2]=D=>v())},null,8,["id","title","description","createdBy","createdAt","dueDate","isDone"])]))),128))])}}},lt=B(ot,[["__scopeId","data-v-deb00020"]]);export{lt as default};
