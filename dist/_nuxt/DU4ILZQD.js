import{_ as E}from"./BakvCKDg.js";import{_ as w}from"./s268USud.js";import{u as B}from"./Dk6NIHTW.js";import{d as S,a5 as R,r as g,j as D,P as N,f as V,c as h,a,E as s,G as m,$ as v,a0 as y,u as p,b as l,I as k,F as u,_ as L}from"./BQVyWk7f.js";const M={class:"background"},O={class:"header"},P={key:0},T={key:1},j=["onClick"],q=S({__name:"refund",setup(F){const b=R(),_=g([]),r=B().user,{$bridge:$}=D(),c=$,i=g([]);c.setjwt(N("token").value??"");let f="";V(()=>{const o=b.query.list_coloc;o&&(_.value=JSON.parse(o)),c.getRefund(r.colocationId).then(e=>{i.value=e,console.log(i.value)}).catch(e=>{console.error("Error fetching data:",e)}),c.getExpenseByColocationId(r.colocationId).then(e=>{e.forEach(n=>{n.name==="refund"&&(f=n.id)})}).catch(e=>{console.error("Error fetching expenses:",e)})});const x=o=>{const e={colocationId:r.colocationId,createdBy:r.id,name:"refund",description:"Remboursement de "+o.amount+"€",amount:o.amount,category:"refund",paidBy:o.from,splitType:0,splitBetween:[o.to],splitValues:{},splitPercentages:{},dateOfPayment:new Date().toISOString(),expenseCategoryId:f};c.addExpense(e).then(n=>{console.log(n),n===!0&&window.location.reload()}).catch(n=>{console.error("Error adding expense:",n)})},I=h(()=>i.value.filter(o=>o.from===r.id||o.to===r.id)),C=h(()=>i.value.filter(o=>o.from!==r.id&&o.to!==r.id)),d=o=>{const e=_.value.find(n=>n.id===o);return e?e.username:o};return(o,e)=>{const n=E;return l(),a("div",M,[s("div",O,[s("img",{src:w,alt:"Return",width:"30",height:"30",onClick:e[0]||(e[0]=t=>o.$router.back())}),s("h1",null,[m(n,{source:"header_refund"})]),e[1]||(e[1]=s("p",null,null,-1))]),s("div",null,[s("h2",null,[m(n,{source:"refund_with_me"})]),s("ul",null,[(l(!0),a(v,null,y(p(I),t=>(l(),a("li",{key:`${t.from}-${t.to}-${t.amount}}`},[t.from===p(r).id?(l(),a("span",P,"De vous à "+u(d(t.to)),1)):(l(),a("span",T,"De "+u(d(t.from))+" à vous",1)),e[2]||(e[2]=s("span",null," Montant : ",-1)),k(" "+u(t.amount)+"€ ",1),s("button",{onClick:A=>x(t),class:"button"},[m(n,{source:"refund_button"})],8,j)]))),128))])]),s("div",null,[s("h2",null,[m(n,{source:"other_refund"})]),s("ul",null,[(l(!0),a(v,null,y(p(C),t=>(l(),a("li",{key:`${t.from}-${t.to}-${t.amount}}`},[s("span",null,"De "+u(d(t.from))+" à "+u(d(t.to)),1),e[3]||(e[3]=s("span",null," Montant : ",-1)),k(" "+u(t.amount)+"€ ",1)]))),128))])])])}}}),K=L(q,[["__scopeId","data-v-b18fb3bd"]]);export{K as default};
