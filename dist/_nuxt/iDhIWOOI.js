import{_ as E}from"./DCNll-Jd.js";import{_ as B}from"./BItSCqFq.js";import{d as I,r as $,a as h,b as u,E as s,Q as v,u as m,I as N,F as y,L as U,M as L,G as V,N as q,S as F,_ as b,a2 as R,J as A,j as M,K as T,a5 as j,h as z,V as D,W as G,P as H}from"./CeVxT60x.js";import{u as J}from"./COALQSwV.js";import{_ as K}from"./hqz7icfg.js";const P=""+new URL("edit.BfCAEkBn.png",import.meta.url).href,Q={class:"expense-header"},W={key:0,class:"expense-name"},O={key:1,class:"expense-name"},X=I({__name:"ShoppingItem",props:{item:{},onclick:{type:Function}},emits:["update:isChecked","update:name"],setup(f,{emit:_}){const c=$(!1),d=f,g=_,l=()=>{g("update:isChecked",!d.item.isChecked)},C=()=>{c.value=!1,g("update:name",d.item.name)};return(p,o)=>{const k=K;return u(),h("div",{class:"expense",onClick:o[2]||(o[2]=r=>d.onclick&&d.onclick())},[s("div",Q,[m(c)?v("",!0):(u(),h("span",W,[N(y(p.item.name)+" ",1),s("span",null,[s("img",{src:P,width:"20",height:"20",onClick:o[0]||(o[0]=r=>c.value=!m(c)),class:"edit"})])])),m(c)?(u(),h("span",O,[U(s("input",{"onUpdate:modelValue":o[1]||(o[1]=r=>p.item.name=r),maxlength:"42",required:""},null,512),[[L,p.item.name]]),s("button",{onClick:C},[V(k,{source:"confirm"})])])):v("",!0),s("div",{class:F(["check-zone",{checked:p.item.isChecked}]),onClick:q(l,["stop"])},null,2)])])}}}),Y=b(X,[["__scopeId","data-v-ba92b2ee"]]),Z={class:"background"},ee={class:"header"},te={class:"square"},se=["onClick"],oe=I({__name:"item_list",setup(f){J({bodyAttrs:{style:"background-color: #1E1E1E;"}});const _=R(),d=A().user,{$bridge:g}=M(),l=g;l.setjwt(T("token").value??"");const{t:C}=j(),p=z(),o=$({});d.colocationId;const k=_.query.name,r=_.query.id;l.getShoppingListById(r).then(t=>{o.value=t}).catch(t=>{console.error("Error fetching shopping list items:",t)});const S=()=>{p.push({path:"/shopping/additem_list",query:{name:k,listId:r}})},w=(t,i)=>{var a;const e=(a=o.value.shoppingItems)==null?void 0:a.find(n=>n.id===t);e&&(e.isChecked=i,e.shoppinglistId=r,console.log(e),l.updateShoppingListItem(e).then(n=>{if(!n){console.error(`Failed to update item ${t}`),e.isChecked=!i;return}console.log(`Item ${t} updated successfully`)}).catch(n=>{console.error(`Error updating item ${t}:`,n)}))},x=(t,i)=>{var a;const e=(a=o.value.shoppingItems)==null?void 0:a.find(n=>n.id===t);e&&(e.name=i,e.shoppinglistId=r,console.log(e),l.updateShoppingListItem(e).then(n=>{if(!n){console.error(`Failed to update item ${t}`),window.location.reload();return}console.log(`Item ${t} updated successfully`)}).catch(n=>{console.error(`Error updating item ${t}:`,n)}))};return(t,i)=>(u(),h("div",Z,[s("div",ee,[s("img",{src:E,alt:"Return",width:"30",height:"30",onClick:i[0]||(i[0]=e=>t.$router.back())}),s("h1",null,y(m(k)),1),s("div",te,[s("div",{id:"add",onClick:()=>S()},i[1]||(i[1]=[s("img",{src:B,alt:"Return",width:"30",height:"30"},null,-1)]),8,se)])]),s("div",null,[(u(!0),h(D,null,G(m(o).shoppingItems,e=>(u(),H(m(Y),{key:e.id??e.name,item:e,"onUpdate:isChecked":a=>w(e.id??"",a),"onUpdate:name":a=>x(e.id??"",a)},null,8,["item","onUpdate:isChecked","onUpdate:name"]))),128))])]))}}),de=b(oe,[["__scopeId","data-v-5beb9a6b"]]);export{de as default};
