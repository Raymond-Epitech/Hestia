import{_ as z}from"./C9cwCERm.js";import{d as H,r as w,f as G,a as m,ab as ae,J as j,j as q,K as Q,O as K,g as U,s as de,P as F,b as i,H as N,Q as P,u as r,E as e,N as O,G as A,I as B,L as Y,M as X,V as R,W as L,F as C,a3 as le,T as Z,_ as V,S as ee,a7 as J,U as te}from"./CeIDTogW.js";import{u as oe,_ as re,a as ie}from"./Bd5XDEej.js";const ce=Symbol.for("nuxt:client-only"),ue=H({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(v,{slots:d,attrs:b}){const t=w(!1);return G(()=>{t.value=!0}),ae(ce,!0),l=>{var n;if(t.value)return(n=d.default)==null?void 0:n.call(d);const k=d.fallback||d.placeholder;if(k)return k();const c=l.fallback||l.placeholder||"",_=l.fallbackTag||l.placeholderTag||"span";return m(_,b,c)}}}),pe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEfSURBVHgBtVQBEYMwDAxTMAdDAhKYEyTgABwxB5XAHBQHSOgSlh5ZgSbctr/LtbTf55NcC3CAEMIVo8UYMHxYQXOH0WCUYAULdhhzsKGziJaJO5c6w3nFa0OSRWkRpbE+aWRfXBBGKgcYwaUbhfhVbna7G+fEo7FephNRZg77XC2pdKwxL+a4EYQH5F3la/nmOOa08qNRhNVGfZgU5AoUaOJhLasHngQ4Tj0Hv3NuwQX+BeHsZuBqpajiHjl+8vpdE8XBYdA4Eb8oiimhxT5NdKDlvziwZbZxKjjx/WjirYkvWa0I50S3Fw0nvXDzmyu9s/HVIwQHqah1TM7UpjNh+9BTM+iaVgmH1pzgmYzImmuYmWvvS+LMJ+4okzYn+AJWiCLJUgwSAAAAAABJRU5ErkJggg==",me={key:0},_e={class:"modal-header"},ve={class:"modal-header-text"},ge={method:"post",action:""},fe={class:"modal-body"},he={class:"task-assignee"},Ae={class:"text-task-assignee"},be=["value"],ke={class:"date-picker"},ye={class:"modal-buttons"},De=H({__name:"AddTaskModal",props:{name:{},modelValue:{type:Boolean},header:{type:Boolean,default:!0},buttons:{type:Boolean,default:!0},borders:{type:Boolean,default:!0}},emits:["closed","proceed","update:modelValue"],setup(v,{expose:d,emit:b}){const t=v,l=j(),{$bridge:k}=q(),c=k;c.setjwt(Q("token").value??"");const _=w([]),n=w({colocationId:l.user.colocationId,createdBy:l.user.id,dueDate:"",title:"",description:"",enrolled:null,isDone:!1}),{modelValue:u}=K(t),{open:D,close:g,toggle:o,visible:y}=oe(t.name);c.getUserbyCollocId(l.user.colocationId).then(f=>{_.value=f}).catch(f=>{console.error("Error fetching data:",f)});const x=b;d({open:D,close:g,toggle:o,visible:y});const S=()=>{g(),x("closed")},T=async()=>{const f={...n.value,enrolled:n.value.enrolled?[n.value.enrolled]:[]};await c.addChore(f),g(),x("proceed")};return U(u,(f,s)=>{f!==s&&o(f)},{immediate:!0}),U(y,f=>{x("update:modelValue",f)}),(f,s)=>{const $=z,E=de("vue-date-picker"),I=ue;return i(),F(Z,{name:"modal"},{default:N(()=>[r(y)?(i(),m("div",me,[e("div",{class:"modal-background",onClick:S},[e("div",{class:"modal",onClick:s[4]||(s[4]=O(()=>{},["stop"]))},[s[8]||(s[8]=e("div",{class:"padding-top"},null,-1)),e("div",_e,[e("h1",ve,[A($,{source:"newTask"}),s[5]||(s[5]=B(": "))])]),e("form",ge,[e("div",fe,[Y(e("input",{class:"modal-body-input","onUpdate:modelValue":s[0]||(s[0]=h=>r(n).title=h),maxlength:"35",placeholder:"Set task name",required:""},null,512),[[X,r(n).title]]),Y(e("input",{class:"modal-body-input","onUpdate:modelValue":s[1]||(s[1]=h=>r(n).description=h),maxlength:"45",placeholder:"Set task description (optional)"},null,512),[[X,r(n).description]])]),e("div",he,[e("text",Ae,[A($,{source:"Assignee"}),s[6]||(s[6]=B(": "))]),Y(e("select",{"onUpdate:modelValue":s[2]||(s[2]=h=>r(n).enrolled=h),class:"input-task-assignee"},[(i(!0),m(R,null,L(r(_),h=>(i(),m("option",{key:h.id,value:h.id},C(h.username),9,be))),128))],512),[[le,r(n).enrolled]])]),e("div",ke,[A(I,null,{default:N(()=>[A(E,{placeholder:"MM/DD/YYYY",format:"MM/dd/yyyy",modelValue:r(n).dueDate,"onUpdate:modelValue":s[3]||(s[3]=h=>r(n).dueDate=h),"teleport-center":"",dark:""},null,8,["modelValue"])]),_:1})]),e("div",ye,[e("button",{class:"button-proceed",onClick:O(T,["prevent"])},s[7]||(s[7]=[e("img",{src:pe,class:"submit"},null,-1)]))])])])])])):P("",!0)]),_:1})}}}),xe=V(De,[["__scopeId","data-v-359e3277"]]),Ce={},we={class:"box"};function Se(v,d){return i(),m("div",we,d[0]||(d[0]=[e("text",null,"COMMING SOON",-1)]))}const Be=V(Ce,[["render",Se],["__scopeId","data-v-ec2aed27"]]),Ve={key:0},$e={class:"modal-header"},Me={class:"modal-header-text"},Ue={class:"title"},Te={class:"description"},Ee={class:"due-date"},Ie={class:"number"},Ye={class:"month"},Ne={class:"modal-body"},Oe={class:"modal-buttons"},He={class:"enrollees-icon-container"},je=["value"],qe={key:0},Qe={key:1},Re={key:2},Le={key:3},We=H({__name:"TaskModal",props:{id:{},title:{},modelValue:{type:Boolean},description:{},color:{},dueDate:{},isDone:{type:Boolean}},emits:["closed","proceed","update:modelValue"],setup(v,{expose:d,emit:b}){const t=v,l=j(),{$bridge:k}=q(),c=k;c.setjwt(Q("token").value??"");const _=w(!1),n=w([]);var u=t.isDone;const{modelValue:D}=K(t),{open:g,close:o,toggle:y,visible:x}=oe(t.title),S=b;d({open:g,close:o,toggle:y,visible:x});const T=async()=>{const a=await c.getUserEnrollChore(t.id);n.value=a,_.value=a.some(p=>p.id===l.user.id)},f=()=>{o(),S("closed")},s=async()=>{c.deleteChoreUser(t.id,l.user.id).then(()=>{_.value=!1}).catch(a=>{console.error("Error delete chore user:",a)}),o(),S("proceed")},$=async()=>{c.addChoreUser(t.id,l.user.id).then(()=>{_.value=!0}).catch(a=>{console.error("Error add chore user:",a)}),o(),S("proceed")},E=async()=>{const a={id:t.id,colocationId:l.user.colocationId,dueDate:t.dueDate,title:t.title,description:t.description,isDone:!0,enrolled:n.value.map(p=>p.id)};c.updateChore(a).then(()=>{u=!0}).catch(p=>{console.error("Error update chore:",p)}),o(),S("proceed")};function I(){return new Date(t.dueDate).getDate()}function h(){return new Date(t.dueDate).toLocaleString("en-US",{month:"short"})}return U(D,(a,p)=>{a!==p&&(y(a),a===!0&&T())},{immediate:!0}),U(x,a=>{S("update:modelValue",a)}),(a,p)=>{const ne=Be,se=re,M=z;return i(),F(Z,{name:"modal"},{default:N(()=>[r(x)?(i(),m("div",Ve,[e("div",{class:"modal-background",onClick:f},[e("div",{class:ee(["modal",t.color]),onClick:p[0]||(p[0]=O(()=>{},["stop"]))},[e("div",$e,[e("div",Me,[e("text",Ue,C(a.title),1),e("text",Te,C(a.description),1)]),e("div",Ee,[e("div",Ie,C(I()),1),e("div",Ye,C(h()),1)])]),e("div",Ne,[A(ne),J(a.$slots,"content",{},void 0,!0)]),e("div",Oe,[e("div",He,[(i(!0),m(R,null,L(r(n),W=>(i(),m("div",{key:W.id,value:W.id,class:"enrollees-icon"},[A(se,{height:33,width:33})],8,je))),128))]),J(a.$slots,"buttons",{},()=>[r(_)?(i(),m("div",qe,[e("button",{class:"button button-proceed",onClick:s},[A(M,{source:"quit"}),p[1]||(p[1]=B(" :c "))])])):(i(),m("div",Qe,[e("button",{class:"button button-proceed",onClick:$},[A(M,{source:"Enroll"}),p[2]||(p[2]=B(" ! "))])])),r(u)?(i(),m("div",Re,[e("text",null,[A(M,{source:"isDone"})])])):(i(),m("div",Le,[e("button",{class:"button button-proceed",onClick:E},[A(M,{source:"Done"}),p[3]||(p[3]=B(" ! "))])]))],!0)])],2)])])):P("",!0)]),_:3})}}}),Xe=V(We,[["__scopeId","data-v-28333091"]]),Je={class:"task-container"},ze={class:"due-date"},Ge={class:"number"},Ke={class:"month"},Fe={__name:"Task",props:{id:{type:String,required:!0},title:{type:String,required:!1},description:{type:String,required:!1},createdBy:{type:String,required:!0},createdAt:{type:String,required:!0},dueDate:{type:String,required:!0},isDone:{type:Boolean,required:!0}},emits:["proceed","get"],setup(v,{emit:d}){const b=v,t=w(!1),l=()=>t.value=!0,k=d;function c(){k("proceed")}function _(){return new Date(b.dueDate).getDate()}function n(){return new Date(b.dueDate).toLocaleString("en-US",{month:"short"})}function u(){const D=new Date(b.dueDate),o=Math.ceil((D-new Date)/(1e3*3600*24));return o<1?"red":o<3?"orange":o>=3?"green":"red"}return(D,g)=>{const o=Xe;return i(),m("div",Je,[A(o,{modelValue:r(t),"onUpdate:modelValue":g[0]||(g[0]=y=>te(t)?t.value=y:null),id:v.id,title:v.title,description:v.description,color:u(),dueDate:v.dueDate,isDone:v.isDone,onProceed:g[1]||(g[1]=y=>c())},null,8,["modelValue","id","title","description","color","dueDate","isDone"]),e("div",{class:ee(["task",[u()]]),"data-toggle":"modal","data-target":".bd-example-modal-sm",onClick:l},[e("h1",null,C(v.title),1),e("div",ze,[e("div",Ge,C(_()),1),e("div",Ke,C(n()),1)])],2)])}}},Pe=V(Fe,[["__scopeId","data-v-18bfdba1"]]),Ze={__name:"tasks",setup(v){const d=w(!1),b=()=>d.value=!0,t=j(),{$bridge:l}=q(),k=l;k.setjwt(Q("token").value??"");const c=w([]),_=async()=>{const n=await k.getAllChore(t.user.colocationId);c.value=n};return G(async()=>{await _()}),(n,u)=>{const D=xe,g=Pe;return i(),m("div",null,[A(D,{modelValue:r(d),"onUpdate:modelValue":u[0]||(u[0]=o=>te(d)?d.value=o:null),onProceed:u[1]||(u[1]=o=>_())},null,8,["modelValue"]),e("button",{class:"add-post","data-toggle":"modal","data-target":".bd-example-modal-sm",onClick:b},u[3]||(u[3]=[e("img",{src:ie,class:"plus"},null,-1)])),(i(!0),m(R,null,L(r(c),(o,y)=>(i(),m("div",{key:y,class:"task-list"},[A(g,{id:o.id,title:o.title,description:o.description,createdBy:o.createdBy,createdAt:o.createdAt,dueDate:o.dueDate,isDone:o.isDone,onProceed:u[2]||(u[2]=x=>_())},null,8,["id","title","description","createdBy","createdAt","dueDate","isDone"])]))),128))])}}},nt=V(Ze,[["__scopeId","data-v-deb00020"]]);export{nt as default};
