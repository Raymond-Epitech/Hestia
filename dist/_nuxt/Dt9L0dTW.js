const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CG0j2iNa.js","./BpMS3-g9.js","./k0LMFOWj.js","./CEvMXAWB.js"])))=>i.map(i=>d[i]);
import{GoogleSignInButton as V}from"./BpMS3-g9.js";import{Z as z,_ as J,$ as D,a0 as Q,a as Z,r as B,u as X,t as S,x as E,O as I,Q as Y,z as j,R as N,W as ee,v as U}from"./k0LMFOWj.js";import{u as te}from"./CEvMXAWB.js";const ne=""+new URL("logo-hestia.CKefSU_e.png",import.meta.url).href;/*! Capacitor: https://capacitorjs.com/ - MIT License */var C;(function(n){n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE"})(C||(C={}));class $ extends Error{constructor(e,t,o){super(e),this.message=e,this.code=t,this.data=o}}const re=n=>{var e,t;return n!=null&&n.androidBridge?"android":!((t=(e=n==null?void 0:n.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},se=n=>{const e=n.CapacitorCustomPlatform||null,t=n.Capacitor||{},o=t.Plugins=t.Plugins||{},s=()=>e!==null?e.name:re(n),r=()=>s()!=="web",c=a=>{const i=m.get(a);return!!(i!=null&&i.platforms.has(s())||d(a))},d=a=>{var i;return(i=t.PluginHeaders)===null||i===void 0?void 0:i.find(l=>l.name===a)},f=a=>n.console.error(a),m=new Map,P=(a,i={})=>{const l=m.get(a);if(l)return console.warn(`Capacitor plugin "${a}" already registered. Cannot register plugins twice.`),l.proxy;const u=s(),w=d(a);let y;const q=async()=>(!y&&u in i?y=typeof i[u]=="function"?y=await i[u]():y=i[u]:e!==null&&!y&&"web"in i&&(y=typeof i.web=="function"?y=await i.web():y=i.web),y),G=(g,h)=>{var b,L;if(w){const v=w==null?void 0:w.methods.find(p=>h===p.name);if(v)return v.rtype==="promise"?p=>t.nativePromise(a,h.toString(),p):(p,k)=>t.nativeCallback(a,h.toString(),p,k);if(g)return(b=g[h])===null||b===void 0?void 0:b.bind(g)}else{if(g)return(L=g[h])===null||L===void 0?void 0:L.bind(g);throw new $(`"${a}" plugin is not implemented on ${u}`,C.Unimplemented)}},O=g=>{let h;const b=(...L)=>{const v=q().then(p=>{const k=G(p,g);if(k){const x=k(...L);return h=x==null?void 0:x.remove,x}else throw new $(`"${a}.${g}()" is not implemented on ${u}`,C.Unimplemented)});return g==="addListener"&&(v.remove=async()=>h()),v};return b.toString=()=>`${g.toString()}() { [capacitor code] }`,Object.defineProperty(b,"name",{value:g,writable:!1,configurable:!1}),b},T=O("addListener"),W=O("removeListener"),K=(g,h)=>{const b=T({eventName:g},h),L=async()=>{const p=await b;W({eventName:g,callbackId:p},h)},v=new Promise(p=>b.then(()=>p({remove:L})));return v.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await L()},v},_=new Proxy({},{get(g,h){switch(h){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return w?K:T;case"removeListener":return W;default:return O(h)}}});return o[a]=_,m.set(a,{name:a,proxy:_,platforms:new Set([...Object.keys(i),...w?[u]:[]])}),_};return t.convertFileSrc||(t.convertFileSrc=a=>a),t.getPlatform=s,t.handleError=f,t.isNativePlatform=r,t.isPluginAvailable=c,t.registerPlugin=P,t.Exception=$,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t},oe=n=>n.Capacitor=se(n),A=oe(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),R=A.registerPlugin;class M{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let o=!1;this.listeners[e]||(this.listeners[e]=[],o=!0),this.listeners[e].push(t);const r=this.windowListeners[e];r&&!r.registered&&this.addWindowListener(r),o&&this.sendRetainedArgumentsForEvent(e);const c=async()=>this.removeListener(e,t);return Promise.resolve({remove:c})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,o){const s=this.listeners[e];if(!s){if(o){let r=this.retainedEventArguments[e];r||(r=[]),r.push(t),this.retainedEventArguments[e]=r}return}s.forEach(r=>r(t))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:o=>{this.notifyListeners(t,o)}}}unimplemented(e="not implemented"){return new A.Exception(e,C.Unimplemented)}unavailable(e="not available"){return new A.Exception(e,C.Unavailable)}async removeListener(e,t){const o=this.listeners[e];if(!o)return;const s=o.indexOf(t);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(o=>{this.notifyListeners(e,o)}))}}const H=n=>encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),F=n=>n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class ie extends M{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(o=>{if(o.length<=0)return;let[s,r]=o.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=F(s).trim(),r=F(r).trim(),t[s]=r}),t}async setCookie(e){try{const t=H(e.key),o=H(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,r=(e.path||"/").replace("path=",""),c=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${o||""}${s}; path=${r}; ${c};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}R("CapacitorCookies",{web:()=>new ie});const ae=async n=>new Promise((e,t)=>{const o=new FileReader;o.onload=()=>{const s=o.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},o.onerror=s=>t(s),o.readAsDataURL(n)}),ce=(n={})=>{const e=Object.keys(n);return Object.keys(n).map(s=>s.toLocaleLowerCase()).reduce((s,r,c)=>(s[r]=n[e[c]],s),{})},le=(n,e=!0)=>n?Object.entries(n).reduce((o,s)=>{const[r,c]=s;let d,f;return Array.isArray(c)?(f="",c.forEach(m=>{d=e?encodeURIComponent(m):m,f+=`${r}=${d}&`}),f.slice(0,-1)):(d=e?encodeURIComponent(c):c,f=`${r}=${d}`),`${o}&${f}`},"").substr(1):null,de=(n,e={})=>{const t=Object.assign({method:n.method||"GET",headers:n.headers},e),s=ce(n.headers)["content-type"]||"";if(typeof n.data=="string")t.body=n.data;else if(s.includes("application/x-www-form-urlencoded")){const r=new URLSearchParams;for(const[c,d]of Object.entries(n.data||{}))r.set(c,d);t.body=r.toString()}else if(s.includes("multipart/form-data")||n.data instanceof FormData){const r=new FormData;if(n.data instanceof FormData)n.data.forEach((d,f)=>{r.append(f,d)});else for(const d of Object.keys(n.data))r.append(d,n.data[d]);t.body=r;const c=new Headers(t.headers);c.delete("content-type"),t.headers=c}else(s.includes("application/json")||typeof n.data=="object")&&(t.body=JSON.stringify(n.data));return t};class ue extends M{async request(e){const t=de(e,e.webFetchExtra),o=le(e.params,e.shouldEncodeUrlParams),s=o?`${e.url}?${o}`:e.url,r=await fetch(s,t),c=r.headers.get("content-type")||"";let{responseType:d="text"}=r.ok?e:{};c.includes("application/json")&&(d="json");let f,m;switch(d){case"arraybuffer":case"blob":m=await r.blob(),f=await ae(m);break;case"json":f=await r.json();break;case"document":case"text":default:f=await r.text()}const P={};return r.headers.forEach((a,i)=>{P[i]=a}),{data:f,headers:P,status:r.status,url:r.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}R("CapacitorHttp",{web:()=>new ue});const fe=R("SocialLogin",{web:()=>z(()=>import("./CG0j2iNa.js"),__vite__mapDeps([0,1,2,3]),import.meta.url).then(n=>new n.SocialLoginWeb)}),ge={class:"base"},he={key:0,class:"register"},we={key:1,class:"login"},me={__name:"login",setup(n){const{authenticateUser:e}=D(),{authenticated:t}=Q(D()),o=te(),{$bridge:s}=Z(),r=B(""),c=B(!1),d=X(),f=async i=>{const{credential:l}=i;console.log("Access Token",l);const u={username:r.value},w=await s.addUser(u,l);console.log("Data",w),w&&(s.setjwt(w.jwt),await e(w.jwt)),t&&d.push("/")},m=async()=>{try{const i=await fe.signIn({provider:"google"});console.log("Logged in user:",i)}catch(i){console.error("Login failed:",i)}},P=async i=>{if(c.value){f(i);return}const{credential:l}=i;console.log("Access Token",l);const u=await s.login(l);if(console.log("Data",u),u.error){console.error(u.error),c.value=!0;return}u&&(s.setjwt(u.jwt),await o.setUser(u.user),await e(u.jwt)),t&&d.push("/")},a=()=>{console.error("Login failed")};return(i,l)=>{const u=V;return U(),S("div",ge,[l[5]||(l[5]=E("img",{src:ne,class:"logo"},null,-1)),I(c)?(U(),S("div",he,[l[1]||(l[1]=E("h2",{class:"login-font"},"Register : ",-1)),l[2]||(l[2]=E("h2",{class:"register-font"},"Nom d'utilisateur :",-1)),Y(E("input",{class:"input",type:"text",placeholder:"Nom d'utilisateur","onUpdate:modelValue":l[0]||(l[0]=w=>ee(r)?r.value=w:null)},null,512),[[N,I(r)]]),l[3]||(l[3]=E("h2",{class:"register-font"},"Cr√©er un compte :",-1)),j(u,{onSuccess:P,onError:a})])):(U(),S("div",we,[l[4]||(l[4]=E("h2",{class:"login-font"},"Login : ",-1)),j(u,{onSuccess:P,onError:a}),j(u,{onSuccess:m,onError:a}),E("button",{onSuccess:m},"button de login",32)]))])}}},pe=J(me,[["__scopeId","data-v-12c0abf3"]]),ve=Object.freeze(Object.defineProperty({__proto__:null,default:pe},Symbol.toStringTag,{value:"Module"}));export{M as W,ve as l};
