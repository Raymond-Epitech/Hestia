import{_ as B}from"./eeXoyG2q.js";import{_ as R}from"./D5QMMH-8.js";import{_ as b}from"./OZ46ihIq.js";import{u as E}from"./Bbc-UTeH.js";import{d as I,r as $,a as h,b as u,E as n,S as v,u as m,I as N,F as y,V,W as q,G as w,U as L,Y as T,_ as x,a5 as j,j as z,P as A,a8 as D,h as M,H as G,$ as H,a0 as P,R as W}from"./5LWRTrmI.js";import{_ as Y}from"./DDPJLRn1.js";const J=""+new URL("edit.BfCAEkBn.png",import.meta.url).href,K={class:"expense-header"},O={key:0,class:"expense-name"},Q={key:1,class:"expense-name"},X=I({__name:"ShoppingItem",props:{item:{},onclick:{type:Function}},emits:["update:isChecked","update:name"],setup(f,{emit:_}){const c=$(!1),l=f,g=_,p=()=>{g("update:isChecked",!l.item.isChecked)},C=()=>{c.value=!1,g("update:name",l.item.name)};return(d,i)=>{const k=Y;return u(),h("div",{class:"expense",onClick:i[2]||(i[2]=r=>l.onclick&&l.onclick())},[n("div",K,[m(c)?v("",!0):(u(),h("span",O,[N(y(d.item.name)+" ",1),n("span",null,[n("img",{src:J,width:"20",height:"20",onClick:i[0]||(i[0]=r=>c.value=!m(c))})])])),m(c)?(u(),h("span",Q,[V(n("input",{"onUpdate:modelValue":i[1]||(i[1]=r=>d.item.name=r),required:""},null,512),[[q,d.item.name]]),n("button",{onClick:C},[w(k,{source:"confirm"})])])):v("",!0),n("div",{class:T(["check-zone",{checked:d.item.isChecked}]),onClick:L(p,["stop"])},null,2)])])}}}),Z=x(X,[["__scopeId","data-v-5ed62ab7"]]),ee={class:"background"},te={class:"header"},se={class:"square"},oe=I({__name:"item_list",setup(f){const _=j(),l=E().user,{$bridge:g}=z(),p=g;p.setjwt(A("token").value??"");const{t:C}=D(),d=M(),i=$({});l.colocationId;const k=_.query.name,r=_.query.id;p.getShoppingListById(r).then(e=>{i.value=e}).catch(e=>{console.error("Error fetching shopping list items:",e)});const S=()=>{d.push({path:"/shopping/additem_list",query:{name:k,listId:r}})},F=(e,a)=>{var o;const s=(o=i.value.shoppingItems)==null?void 0:o.find(t=>t.id===e);s&&(s.isChecked=a,s.shoppinglistId=r,console.log(s),p.updateShoppingListItem(s).then(t=>{if(!t){console.error(`Failed to update item ${e}`),s.isChecked=!a;return}console.log(`Item ${e} updated successfully`)}).catch(t=>{console.error(`Error updating item ${e}:`,t)}))},U=(e,a)=>{var o;const s=(o=i.value.shoppingItems)==null?void 0:o.find(t=>t.id===e);s&&(s.name=a,s.shoppinglistId=r,console.log(s),p.updateShoppingListItem(s).then(t=>{if(!t){console.error(`Failed to update item ${e}`),window.location.reload();return}console.log(`Item ${e} updated successfully`)}).catch(t=>{console.error(`Error updating item ${e}:`,t)}))};return(e,a)=>{const s=B;return u(),h("div",ee,[n("div",te,[n("img",{src:R,alt:"Return",width:"30",height:"30",onClick:a[0]||(a[0]=o=>e.$router.back())}),n("h1",null,y(m(k)),1),n("div",se,[w(s,{color:"#FFF973",id:"add",onClick:()=>S()},{default:G(()=>a[1]||(a[1]=[n("img",{src:b,alt:"Return",width:"30",height:"30"},null,-1)])),_:1},8,["onClick"])])]),n("div",null,[(u(!0),h(H,null,P(m(i).shoppingItems,o=>(u(),W(m(Z),{key:o.id??o.name,item:o,"onUpdate:isChecked":t=>F(o.id??"",t),"onUpdate:name":t=>U(o.id??"",t)},null,8,["item","onUpdate:isChecked","onUpdate:name"]))),128))])])}}}),pe=x(oe,[["__scopeId","data-v-e6100805"]]);export{pe as default};
