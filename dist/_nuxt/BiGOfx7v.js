import{GoogleSignInButton as x}from"./BP70GH4g.js";import{_ as U,Z as m,$ as j,a as k,r as w,u as R,t as l,x as t,O as _,Q as y,z as v,R as B,W as L,v as u}from"./D58Hotov.js";import{u as N}from"./UCSDa0Uh.js";const A=""+new URL("logo-hestia.CKefSU_e.png",import.meta.url).href,E={class:"base"},T={key:0,class:"register"},D={key:1,class:"login"},I={__name:"login",setup(V){const{authenticateUser:c}=m(),{authenticated:d}=j(m()),S=N(),{$bridge:r}=k(),a=w(""),i=w(!1),g=R(),h=async n=>{const{credential:s}=n;console.log("Access Token",s);const e={username:a.value},o=await r.addUser(e,s);console.log("Data",o),o&&(r.setjwt(o.jwt),await c(o.jwt)),d&&g.push("/")},f=async n=>{if(i.value){h(n);return}const{credential:s}=n;console.log("Access Token",s);const e=await r.login(s);if(console.log("Data",e),e.error){console.error(e.error),i.value=!0;return}e&&(r.setjwt(e.jwt),await S.setUser(e.user),await c(e.jwt)),d&&g.push("/")},p=()=>{console.error("Login failed")};return(n,s)=>{const e=x;return u(),l("div",E,[s[5]||(s[5]=t("img",{src:A,class:"logo"},null,-1)),_(i)?(u(),l("div",T,[s[1]||(s[1]=t("h2",{class:"login-font"},"Register : ",-1)),s[2]||(s[2]=t("h2",{class:"register-font"},"Nom d'utilisateur :",-1)),y(t("input",{class:"input",type:"text",placeholder:"Nom d'utilisateur","onUpdate:modelValue":s[0]||(s[0]=o=>L(a)?a.value=o:null)},null,512),[[B,_(a)]]),s[3]||(s[3]=t("h2",{class:"register-font"},"Cr√©er un compte :",-1)),v(e,{onSuccess:f,onError:p})])):(u(),l("div",D,[s[4]||(s[4]=t("h2",{class:"login-font"},"Login : ",-1)),v(e,{onSuccess:f,onError:p})]))])}}},$=U(I,[["__scopeId","data-v-dc60421d"]]);export{$ as default};
