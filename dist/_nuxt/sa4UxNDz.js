import{_ as C}from"./C9cwCERm.js";import{_ as w}from"./7ZilGS9r.js";import{d as B,a2 as S,r as g,J as R,j as D,K as N,f as V,c as h,a,b as l,E as s,G as m,V as y,W as v,I as k,u as p,F as u,_ as L}from"./CeIDTogW.js";import{u as M}from"./CBwSUo7S.js";const O={class:"background"},T={class:"header"},j={key:0},q={key:1},A=["onClick"],F=B({__name:"refund",setup(J){M({bodyAttrs:{style:"background-color: #1E1E1E;"}});const b=S(),_=g([]),r=R().user,{$bridge:E}=D(),c=E,i=g([]);c.setjwt(N("token").value??"");let f="";V(()=>{const o=b.query.list_coloc;o&&(_.value=JSON.parse(o)),c.getRefund(r.colocationId).then(e=>{i.value=e,console.log(i.value)}).catch(e=>{console.error("Error fetching data:",e)}),c.getExpenseByColocationId(r.colocationId).then(e=>{e.forEach(n=>{n.name==="refund"&&(f=n.id)})}).catch(e=>{console.error("Error fetching expenses:",e)})});const x=o=>{const e={colocationId:r.colocationId,createdBy:r.id,name:"refund",description:"Remboursement de "+o.amount+"€",amount:o.amount,category:"refund",paidBy:o.from,splitType:0,splitBetween:[o.to],splitValues:{},splitPercentages:{},dateOfPayment:new Date().toISOString(),expenseCategoryId:f};c.addExpense(e).then(n=>{console.log(n),n===!0&&window.location.reload()}).catch(n=>{console.error("Error adding expense:",n)})},I=h(()=>i.value.filter(o=>o.from===r.id||o.to===r.id)),$=h(()=>i.value.filter(o=>o.from!==r.id&&o.to!==r.id)),d=o=>{const e=_.value.find(n=>n.id===o);return e?e.username:o};return(o,e)=>{const n=C;return l(),a("div",O,[s("div",T,[s("img",{src:w,alt:"Return",width:"30",height:"30",onClick:e[0]||(e[0]=t=>o.$router.back())}),s("h1",null,[m(n,{source:"header_refund"})]),e[1]||(e[1]=s("p",null,null,-1))]),s("div",null,[s("h2",null,[m(n,{source:"refund_with_me"})]),s("ul",null,[(l(!0),a(y,null,v(p(I),t=>(l(),a("li",{key:`${t.from}-${t.to}-${t.amount}}`},[t.from===p(r).id?(l(),a("span",j,"De vous à "+u(d(t.to)),1)):(l(),a("span",q,"De "+u(d(t.from))+" à vous",1)),e[2]||(e[2]=s("span",null," Montant : ",-1)),k(" "+u(t.amount)+"€ ",1),s("button",{onClick:U=>x(t),class:"button"},[m(n,{source:"refund_button"})],8,A)]))),128))])]),s("div",null,[s("h2",null,[m(n,{source:"other_refund"})]),s("ul",null,[(l(!0),a(y,null,v(p($),t=>(l(),a("li",{key:`${t.from}-${t.to}-${t.amount}}`},[s("span",null,"De "+u(d(t.from))+" à "+u(d(t.to)),1),e[3]||(e[3]=s("span",null," Montant : ",-1)),k(" "+u(t.amount)+"€ ",1)]))),128))])])])}}}),z=L(F,[["__scopeId","data-v-25953bff"]]);export{z as default};
