import{d as A,J as U,j as B,K as I,r as R,O as F,g as S,P as q,b as i,H as T,a as f,Q as D,u as t,E as o,N as C,F as h,L as x,M as X,R as V,T as E,_ as M,S as L,G as $,U as O,V as N,f as Y,W as Z,X as z}from"./AxnGTxi-.js";import{u as G,_ as H,a as J}from"./bKSJX93e.js";import{_ as K}from"./CPJvdn9o.js";import"./B3ZakgeS.js";const Q={key:0},W={class:"modal-header left"},ee={class:"modal-header-text"},oe={method:"post",action:""},te={class:"modal-body left"},se={class:"post-colors-buttons"},ne={key:0,class:"modal-buttons"},le={key:1,class:"modal-buttons"},ae=A({__name:"AddPostModal",props:{name:{},modelValue:{type:Boolean},header:{type:Boolean,default:!0},buttons:{type:Boolean,default:!0},borders:{type:Boolean,default:!0}},emits:["closed","proceed","update:modelValue"],setup(v,{expose:c,emit:w}){const g=v,a=U(),{$bridge:y}=B(),u=y;u.setjwt(I("token").value??"");const e=R({createdBy:a.user.id,content:"",color:"",coordX:0,coordY:0,coordZ:0,colocationId:a.user.colocationId}),{modelValue:b}=F(g),{open:l,close:m,toggle:p,visible:n}=G(g.name),_=w;c({open:l,close:m,toggle:p,visible:n});const k=()=>{e.value={createdBy:a.user.id,content:"",color:"",coordX:0,coordY:0,coordZ:0,colocationId:a.user.colocationId}},j=()=>{k(),m(),_("closed")},P=async()=>{await u.addReminder(e.value)&&(k(),m()),_("proceed")};return S(b,(d,s)=>{d!==s&&p(d)},{immediate:!0}),S(n,d=>{_("update:modelValue",d)}),(d,s)=>(i(),q(E,{name:"modal"},{default:T(()=>[t(n)?(i(),f("div",Q,[o("div",{class:"modal-background",onClick:j},[o("div",{class:"modal",onClick:s[5]||(s[5]=C(()=>{},["stop"]))},[o("div",W,[o("h1",ee,h(d.$t("post-content"))+" :",1)]),o("form",oe,[o("div",te,[x(o("textarea",{class:"modal-body-input",rows:"3",maxlength:"150","onUpdate:modelValue":s[0]||(s[0]=r=>t(e).content=r),required:""},null,512),[[X,t(e).content]])]),o("div",se,[x(o("input",{class:"form-check-input color-choice blue","onUpdate:modelValue":s[1]||(s[1]=r=>t(e).color=r),type:"radio",name:"gridRadios",id:"gridRadios1",value:"blue",required:""},null,512),[[V,t(e).color]]),x(o("input",{class:"form-check-input color-choice yellow","onUpdate:modelValue":s[2]||(s[2]=r=>t(e).color=r),type:"radio",name:"gridRadios",id:"gridRadios2",value:"yellow"},null,512),[[V,t(e).color]]),x(o("input",{class:"form-check-input color-choice pink","onUpdate:modelValue":s[3]||(s[3]=r=>t(e).color=r),type:"radio",name:"gridRadios",id:"gridRadios3",value:"pink"},null,512),[[V,t(e).color]]),x(o("input",{class:"form-check-input color-choice green","onUpdate:modelValue":s[4]||(s[4]=r=>t(e).color=r),type:"radio",name:"gridRadios",id:"gridRadios4",value:"green"},null,512),[[V,t(e).color]])]),t(e).color&&t(e).content?(i(),f("div",ne,[o("button",{class:"button button-proceed",onClick:C(P,["prevent"])},h(d.$t("poster")),1)])):(i(),f("div",le,[o("button",{class:"button button-proceed",onClick:C(P,["prevent"]),disabled:""},h(d.$t("poster")),1)]))])])])])):D("",!0)]),_:1}))}}),de=M(ae,[["__scopeId","data-v-cee18f70"]]),re={__name:"Post",props:{id:{type:String,required:!0},text:{type:String,required:!0},color:{type:String,required:!0}},emits:["delete"],setup(v,{emit:c}){const{t:w}=L(),g=v,a=R(!1),{$bridge:y}=B(),u=y;u.setjwt(I("token").value??"");const e=c,b=()=>{a.value=!0},l=async()=>{a.value=!1;try{await u.deleteReminder(g.id),e("delete")}catch(p){console.error("Failed to delete the post:",p)}},m=()=>{a.value=!1};return(p,n)=>{const _=H,k=K;return i(),f(N,null,[o("div",{class:O(["post",v.color])},[$(_,{class:"profile-icon",height:30,width:30}),o("button",{class:"delete-button",onClick:b},n[0]||(n[0]=[o("div",{class:"close"},null,-1)])),o("p",null,h(v.text),1)],2),t(a)?(i(),q(k,{key:0,text:p.$t("confirm_delete_reminder"),onConfirm:l,onClose:m},null,8,["text"])):D("",!0)],64)}}},ie=M(re,[["__scopeId","data-v-7c1e5baf"]]),ce={__name:"index",setup(v){const c=R(!1),w=()=>c.value=!0,g=U(),{$bridge:a}=B(),y=a;y.setjwt(I("token").value??"");const u=R([]),e=async()=>{const b=await y.getAllReminders(g.user.colocationId);u.value=b};return Y(async()=>{await e()}),(b,l)=>{const m=de,p=ie;return i(),f("div",null,[$(m,{modelValue:t(c),"onUpdate:modelValue":l[0]||(l[0]=n=>Z(c)?c.value=n:null),onProceed:l[1]||(l[1]=n=>e())},null,8,["modelValue"]),o("button",{class:"add-post","data-toggle":"modal","data-target":".bd-example-modal-sm",onClick:w},l[3]||(l[3]=[o("img",{src:J,class:"plus"},null,-1)])),(i(!0),f(N,null,z(t(u),(n,_)=>(i(),f("div",{key:_},[$(p,{id:n.id,text:n.content,color:n.color,onDelete:l[2]||(l[2]=k=>e())},null,8,["id","text","color"])]))),128))])}}},fe=M(ce,[["__scopeId","data-v-aa387f13"]]);export{fe as default};
